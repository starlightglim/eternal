# EternalOS Worker Configuration
# See https://developers.cloudflare.com/workers/wrangler/configuration/

name = "eternalos-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects
[[durable_objects.bindings]]
name = "USER_DESKTOP"
class_name = "UserDesktop"

[[migrations]]
tag = "v1"
new_classes = ["UserDesktop"]

# KV Namespaces
[[kv_namespaces]]
binding = "AUTH_KV"
id = "181861d860e5441a9467effa18a6fa16"

[[kv_namespaces]]
binding = "DESKTOP_KV"
id = "90801c76cfcb483c8dc6f6123ed8f79a"

# R2 Bucket (local dev uses Miniflare simulation)
# For production: wrangler r2 bucket create eternalos-files
[[r2_buckets]]
binding = "ETERNALOS_FILES"
bucket_name = "eternalos-files"

# Workers AI
[ai]
binding = "AI"

# Development variables (for local dev only)
# In production, use: wrangler secret put JWT_SECRET
[vars]
JWT_SECRET = "dev-secret-change-in-production-abc123xyz"

# Development settings
[dev]
port = 8787
local_protocol = "http"
